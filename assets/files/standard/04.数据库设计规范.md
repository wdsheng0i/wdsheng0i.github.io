## 一、背景
研发工作中经常出现因数据库表、数据库表字段格式不规则而影响开发进度的问题，在后续开发使用原来数据库表时，也会因为数据库表的可读性不够高，表字段规则不统一，造成数据查询，数据使用效率低的问题，所以有必要整理出一套合适的数据库表字段命名规范来解决优化这些问题。

本文是一篇包含了数据库命名、数据库表命名、数据库表字段命名及SQL语言编码的规范文档，针对研发中易产生的问题和常见错误做了一个整理和修改，为日后涉及到数据库相关的研发工作做好准备。

## 二、整体设计要求
- 1、数据库级别不设计默认值
- 2、业务表上不做代码值和代码名称这类的简单冗余
- 3、禁止使用存储过程、视图、触发器
- 4、必须做增量设计
- 5、不允许存在逻辑删除标志位（？）
- 6、设计逻辑外键，必须定义索引
- 7、字段不加默认值约束  
- 8、不加外键约束，如果有外键完整性约束，需要应用程序控制 
- 9、在表设计时，给关联字段加索引，命名方式：I_表名_字段名,主键索引名字必须以pk_为前缀，普通索引名字必须以idx_为前缀，唯一索引名字必须以unq_为前缀
- 10、表必须填写描述信息（使用SQL语句建表时）
- 11、字段尽量填写重要描述信息
- 12、主键使用整型，索引字段尽量选择长度短的类型，比如 int，bigint，char
- 13、唯一性太差的字段不适合单独建立索引，即使是频繁的作为查询条件（选择性低于0.35）
- 14、联合索引必须选择最高选择度的字段作为最前面字段
- 15、写入频繁的表在数据量较小时尽量不建立索引，每张表索引数量不超过6个
- 16、更新频繁的状态类，标识类字段不建索引
- 17、新业务默认使用utf8mb4字符集，老业务不做要求


## 三、业务要求  
- 1、同含义字段，名称、类型、精度必须统一
- 2、字段名称、字段中文描述、说明含义必须一致

## 四、数据精度要求  
- 1、UUID类型的主键和外键，设置为varchar(32)或者int自动增长。  
- 2、数字类型原则上只有int和numeric(17,2)。小于integer范围的都设计为integer，有些驱动对tinyint支持不够好。  
- 3、VC的精度划分不能过多，推荐只有100/300/600/900三种精度。需要更长的容量采用text类型  
- 4、外部存储文件的文件显示名称、文件名设置为VC300。存储路径设置为VC600.
- 5、文件大小，单位为byte。1T是 1,099,511,627,776，设置为numeric(20)
- 6、金额，单位为元。设置为numeric(20,2)
- 7、没有精度要求的，不要写精度：int/date/datetime/text等等
- 8、密码不用二进制类型，用16进制字符串 

## 五、命名规范  
- 采用26个英文字母(区分大小写)和0-9的自然数(经常不需要)加上下划线'_'组成，命名简洁明确，多个单词用下划线'_'分隔
- 全部小写命名，禁止出现大写
- 禁止使用数据库关键字，如：name，time ，datetime，password等
- 表名称不应该取得太长（一般不超过三个英文单词）
- 表的名称一般使用名词或者动宾短语
- 用单数形式表示名称，例如，使用 employee，而不是 employees 
- 数据库命名：
    - DB_系统名/子系统名。 如：DB_BBS     
    - 数据库编码： UTF8  
- 数据表命名    
    - 系统_业务模块_主表名, 系统_业务模块_主表名_子表名/关联表名  
    如：BBS_SYS_USER, BBS_SYS_USER_ROLE  
    - 表名过于长时，可以考虑统一去除前缀：系统_
- 字段命名(或者统一不带类型前缀)  
    - 1、表的主键统一命名C_ID，数据类型：VC,数据长度32  
    - 2、字符型字段命名规范：C_字段中文名首字母简拼，数据类型：VC，数据长度50、100、150、300、600、2000、4000、text  
    	*单值代码表的主键、代码值，组织机构表的主键采用字符型设计，兼容性更好   
    	*长度2000、4000兼容二期字段使用  
    - 3、整形字段命名规范：N_字段中文名首字母简拼，数据类型：INT  
    - 4、金额字段命名：N_字段中文名首字母简拼，数据类型：N，数据长度：20，精度：4  
    - 5、日期字段命名规范：D_字段中文名首字母简拼,数据类型：D或DT  

## 六、增量设计   
```
creater	varchar(100), 
create_date datetime NOT NULL,
update_date datetime DEFAULT NULL,
updater	varchar(100), 
```

## 七、对接兼容性设计
- 设计时要考虑系统前期现状，长度设计不能低于系统前期字段长度设计，方便后续数据迁移
- 设计时要考虑系统对接现状，长度设计不能低于系统对接字段长度设计，方便后续数据对接


