---
layout: post
title: K8S持续部署（CD）工具-ArgoCD
category: dev-ops
tags: [dev-ops]
---

K8S持续部署（CD）工具-ArgoCD

## 参考资料
- [Argo CD 官方文档](https://argo-cd.readthedocs.io/en/stable/)
    - https://lib.jimmysong.io/argo-cd/
    - [Argo CD 使用指南](https://kubeoperator.io/docs/user_manual/argocd/)
- [GitOps 持续部署工具 Argo CD 初体验](https://blog.csdn.net/weixin_40046357/article/details/118447858)
- [使用 GitLab CI 与 Argo CD 进行 GitOps 实践](https://cloud.tencent.com/developer/article/1664073?from=article.detail.1755628)
- [在K8S中使用Argo CD做持续部署](https://cloud.tencent.com/developer/article/1750692?from=article.detail.1664073)
- [微服务 CI/CD 实践-GitOps 完整设计与实现](https://mp.weixin.qq.com/s/MN08YzdpDMYZ5xpQP1ECQQ)

## 1.ArgoCD 简介
ArgoCD是一个为 Kubernetes 而生的，遵循声明式 GitOps 理念的持续部署（CD）工具，它的配置和使用非常简单，      
并且自带一个简单易用的 Dashboard 页面，并且支持多种配置管理/模板工具（例如 Kustomize、Helm、Ksonnet、Jsonnet、plain-YAML）。
  
ArgoCD被实现为一个Kubernetes控制器，它持续监控正在运行的应用程序并将当前实时状态与所需目标状态（例如Git仓库中的配置）进行比较，在Git仓库更改时自动同步和部署应用程序。

## 2.架构图
ArgoCD 在 CI/CD 流程中的位置如下图所示，Argo CD 的主要职责是 CD（Continuous Delivery，持续交付），将应用部署到 Kubernetes 等环境中  
CI（Continuous Integration，持续集成）主要是交给 Jenkins，Gitlab CI 等工具来完成。

![](https://wdsheng0i.github.io/assets/images/2021/argocd/argocd.png)

## 3.k8s部署ArgoCD
- [ArgoCD 简明教程](https://blog.csdn.net/cr7258/article/details/122028096)
- [ArgoCD的安装与部署](https://blog.csdn.net/Jacson__/article/details/124850916)
``` 
# 创建命名空间
kubectl create namespace argocd
# 部署 argo cd
wget https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl apply -n argocd -f install.yaml

备注：wget拒绝链接，可以使用浏览器访问下载后，上传到服务器
```

## 4.离线部署ArgoCD

## 5.ArgoCD配置git仓库、配置部署应用k8s集群

## 问题记录